function Cute_Crumbs(options) {
    this.options = $.extend({}, this.options, options);
}

Cute_Crumbs.prototype.options = {
    defaultText: "#defaultText",
    crumbsContainer: "#container",
    removeCallback: null,
    removeConfirmation: null
};

Cute_Crumbs.prototype.count = 0

Cute_Crumbs.prototype.crumbsMap = {}

Cute_Crumbs.prototype.add = function (items) {
    for (var i = 0, l = items.length; i < l; i++) {
        //create and append crumb to crumbs container
        var $crumb = this._createCrumb(items[i], items[i].removeCallback || this.options.removeCallback, items[i].removeConfirmation || this.options.removeConfirmation);
        $crumb.appendTo($(this.options.crumbsContainer));

        //add new crumb to crumbs map
        if (items[i].id) this.crumbsMap[items[i].id] = $crumb;

        //new crumb added, so increment by 1
        this.count++;

        //check crumbs count
        this._checkCount();
    }
}

Cute_Crumbs.prototype.remove = function (id) {
    if (this.crumbsMap[id]) {
        this.crumbsMap[id].cleanUp();
    } else {
        console.log("No crumb to remove " + id);
    }
}

Cute_Crumbs.prototype._createCrumb = function (info, removeCallback, removeConfirmation) {
    var self = this;
    
    var $crumb = utils.createElement("<li/>", null, { 'class': "list-group-item", 'html': info.name });
    var $closeButton = utils.createElement("<button/>", $crumb, { 'type': "button", 'class': "close", 'aria-hidden': "true", "html": "&times;" });
    $crumb.cleanUp = function () {
        //if confirmation says false, go back
        if (removeConfirmation) {
            if (!removeConfirmation(info, $crumb))
                return;
        }

        //remove this crumb
        $crumb.remove();
        
        //decrement by one and check count again
        self.count--;
        self._checkCount();

        if (removeCallback) removeCallback(info, $crumb);
    };
    //remove item crumb on x button click
    $closeButton.click($crumb.cleanUp);

    return $crumb;
}

Cute_Crumbs.prototype._checkCount = function () {
    var $defaultText = $(this.options.defaultText);
    if (this.count <= 0) {
        $defaultText.show();
    } else {
        $defaultText.hide();
    }
}